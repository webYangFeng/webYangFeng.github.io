(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-006e8575"],{"0610":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("canvas",{attrs:{id:"three"}}),n("el-button",{staticStyle:{position:"absolute",top:"20px",right:"20px"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),n("el-button",{staticStyle:{position:"absolute",top:"70px",right:"20px"},on:{click:e.showBone}},[e._v("显示骨骼")])],1)},o=[],i=(n("2705"),n("dc11"),n("86e5")),s=n("255c"),c=n("f802"),l=n("63e7"),r={data:function(){return{scene:null,isShowBone:!1}},mounted:function(){this.initThree()},methods:{initThree:function(){var e=new i["nb"];e.background=new i["m"]("#FFF");var t=document.querySelector("#three"),n=new i["Db"]({canvas:t,antialias:!0});n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.shadowMap.type=i["bb"];var a=window.innerWidth,o=window.innerHeight,r=a/o,d=80,w=new i["ab"](-d*r,d*r,d,-d,1,1e3);w.position.set(10,100,230),w.lookAt(e.position);var m=new i["a"](16777215,.3);e.add(m);var u=new i["tb"](16777215,1);u.position.set(100,150,150),u.angle=Math.PI/3,u.penumbra=.2,u.intensity=2,e.add(u),u.shadow.mapSize.width=2048,u.shadow.mapSize.height=2048;var h=new i["db"](8e4,8e4),p=new i["R"]({color:"#ccc",shininess:0}),v=new i["P"](h,p);v.rotation.x=-.5*Math.PI,v.name="地板",e.add(v),u.castShadow=!0,v.receiveShadow=!0;var b=new i["t"],g=new s["a"],f=null,y=null;g.load("/model/airship.glb",(function(e){var t=e.scene;t.scale.set(10,10,10),t.position.set(0,40,0),t.name="飞船",b.add(t),t.traverse((function(e){e instanceof i["P"]&&(e.castShadow=!0,e.receiveShadow=!0)})),y=new i["c"](t);var n=y.clipAction(e.animations[0]);n.setDuration(18).play(),g.load("/model/dinosaur.glb",(function(e){var t=e.scene;t.scale.set(10,10,10),t.position.set(10,47,60),t.name="恐龙",b.add(t);var n=["glow_skeleton_glow_mat_0","glow2_skeleton_glow_mat_0","glow1_skeleton_glow_mat_0"];t.traverse((function(e){e instanceof i["P"]&&!n.includes(e.name)&&(e.castShadow=!0,e.receiveShadow=!0)})),f=new i["c"](t);var a=f.clipAction(e.animations[0]);a.setDuration(8).play()}))})),e.add(b);var S=new l["b"];S.setSize(a,o),S.domElement.style.position="absolute",S.domElement.style.top="0",S.domElement.style.left="0",S.domElement.style.pointerEvents="none",document.body.appendChild(S.domElement);var x=new i["kb"],_=new i["Ab"];function j(e){e.preventDefault(),_.x=e.clientX/a*2-1,_.y=-e.clientY/o*2+1,x.setFromCamera(_,w);var t=x.intersectObjects(b.children,!0);return t}function k(t){var n=j(t);if(0!==n.length&&n[0].object.name){var a=e.getObjectByName("描述");a&&e.remove(a),e.getObjectByName("恐龙").getObjectByName(n[0].object.name)?B("恐龙",4,3,10):e.getObjectByName("飞船").getObjectByName(n[0].object.name)&&B("飞船",40,40,-20)}else console.log("未选中 Mesh!")}function B(t,n,a,o){var i=document.createElement("div");i.className="tag",i.innerHTML=t,i.style.color="#FFF",i.style.background="#333",i.style.fontSize="16px",i.style.borderRadius="5px",i.padding="16px 20px";var s=new l["a"](i);s.visible=!0,s.position.set(n,a,o),s.name="描述",e.add(s)}document.addEventListener("click",k,!1);var E=new i["l"],P=new i["l"],O=new c["a"](w,n.domElement);function F(){if(O.update(),n.render(e,w),S.render(e,w),requestAnimationFrame(F),f&&f.update(E.getDelta()),y&&y.update(P.getDelta()),N(n)){var t=n.domElement;w.aspect=t.clientWidth/t.clientHeight,w.updateProjectionMatrix()}}function N(e){var t=e.domElement,n=t.width/window.devicePixelRatio,i=t.height/window.devicePixelRatio,s=n!==a||i!==o;return s&&e.setSize(a,o,!1),s}O.enableDamping=!0,F(),this.scene=e},showBone:function(){if(this.isShowBone=!this.isShowBone,this.isShowBone){var e=this.scene.getObjectByName("恐龙"),t=new i["pb"](e);t.name="骨骼",this.scene.add(t)}else{var n=this.scene.getObjectByName("骨骼");this.scene.remove(n)}}}},d=r,w=(n("3ee5"),n("1805")),m=Object(w["a"])(d,a,o,!1,null,"6b0a91ae",null);t["default"]=m.exports},"3ee5":function(e,t,n){"use strict";n("63a7")},"63a7":function(e,t,n){}}]);